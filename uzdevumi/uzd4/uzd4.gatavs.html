<html>
  <head>
    <link rel="stylesheet" type="text/css" href="./styles.css">
    <script type="text/javascript" >
      var rowIndex = 0;
      function init() {
        let root = document.getElementById("root");
        let button = document.createElement("button");
        let form = document.createElement("form");
        let div = document.createElement("div");
        button.setAttribute("onClick", "pievienotRindu()");
        button.innerHTML = "Pievienot rindu";
        form.setAttribute("id", "forma");
        div.setAttribute("id", "objekts");
        root.appendChild(button);
        root.appendChild(form);
        root.appendChild(div);
      }
      function pievienotRindu() {
        let form = document.getElementById("forma");
        let div = document.createElement("div");
        let input1 = document.createElement("input");
        let input2 = document.createElement("input");
        let btn = document.createElement("button");
        setAttributes(div, {"id": "div-"+rowIndex});
        setAttributes(input1, {"type": "text", "name": "atslega", "placeholder": "atslēga", "onchange": "render()"});
        setAttributes(input2, {"type": "text", "name": "vertiba", "placeholder": "vertība", "onchange": "render()"});
        setAttributes(btn, {"type": "button", "onclick": `nonemtRindu("div-${rowIndex}")`});
        btn.innerHTML = "Noņemt rindu";
        div.appendChild(input1);
        div.appendChild(input2);
        div.appendChild(btn);
        form.appendChild(div);
        render();
        rowIndex++;
      }
      function nonemtRindu(id) {
        let div = document.getElementById(id);
        div.remove();
        render();
      }
      function setAttributes(element, attrs) {
        for(var key in attrs) {
          element.setAttribute(key, attrs[key]);
        }
      }
      function render() {
        let keys = Array.prototype.slice.call(document.getElementsByName("atslega"));
        let values = Array.prototype.slice.call(document.getElementsByName("vertiba"));
        let div = document.getElementById("objekts");
        let object = {};
        for (let i = 0; i < keys.length; i++) {
          object[keys[i].value] = values[i].value;
        }
        div.innerHTML = JSON.stringify(object);
      }
    </script>
  </head>
  <body onload="init()">
    <div id="task">
      <h1>Darbības ar DOM elementiem</h1>
      <ol>
        <li>Izveidot funkciju, kura izveidos jaunu HTML "form" DOM elementu</li>
        <li>Izveidot funkciju, kura pievienos HTML DOM "form" elementam jaunu rindu ar diviem ievadlaukiem un pogu</li>
        <li>Izveidot funkciju, kura 2 punktā pievneotās pogas nospiešanas gadījumā dzēstu no HTML DOM formas to rindu kurā atrodas šī nospiestā poga</li>
        <li>Pievienot formai pogu "Pievienot rindu" ar kuras nospiešanu tiks izpildīta funkcijas no otrā punkta</li>
        <li>Izveidot funkciju kura parādītu visu ievad lauku saturu kā javascript objektu, pirmais lauks - atslēga, otrais lauks - vērtība</li>
      </ol>
    </div>
    <div id="root">
    </div>
    <div id="info">
      <ul>
        <li><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object" target="_new">MDN Objekti</a></li>
        <li><a href="https://www.w3schools.com/js/js_objects.asp" target="_new">w3s Objekti</a></li>
      </ul>
    </div>
  </body>
</html>